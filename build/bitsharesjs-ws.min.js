!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function(){function n(t,e,i){function r(s,u){if(!e[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var a=e[s]={t:{}};t[s][0].call(a.t,function(n){return r(t[s][1][n]||n)},a,a.t,n,t,e,i)}return e[s].t}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return n}()({1:[function(n,t,e){(function(i){"use strict";function r(n){return n&&n.s?n:{default:n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.s=!0;var s=r(n("./ChainWebSocket")),u=r(n("./GrapheneApi")),c=r(n("./ChainConfig"));if(i)i.u="";else;var f=!1,a=function(){function n(){o(this,n)}return n.h=function(n){this.l=n,inst&&inst.h(n)},n.v=function(n){f=n},n.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,r=arguments[3],o=arguments[4],s=this,u=arguments[5],c=arguments[6];return this.close().then(function(){return inst=new n,inst.h(s.l),inst&&e&&inst.connect(t,i,r,o,u,c),inst})},n.p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,r=arguments[3],o=arguments[4],s=arguments[5],u=arguments[6];return inst||(inst=new n,inst.h(this.l)),inst&&e&&inst.connect(t,i,r,o,s),u&&(inst.m=u),inst},n._=function(){return this.p().T},n.close=function(){return inst?new Promise(function(n){inst.close().then(function(){inst=null,n()})}):Promise.resolve()},n.prototype.connect=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{k:!1,g:!1,P:!1},i=this,r=arguments[3],o=arguments[4];this.url=n;var r=r,o=o;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.S&&(this.S.l=null,this.S.C=null,this.S.O=null,this.S.A=null),this.S=new s.default(n,this.l,t,f,function(n){i.W&&!n&&i.W.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.G=this.S.I(r,o).then(function(){i.W=new u.default(i.S,"database"),i.q=new u.default(i.S,"network_broadcast"),i.H=new u.default(i.S,"history"),e.g&&(i.U=new u.default(i.S,"orders")),e.k&&(i.j=new u.default(i.S,"crypto")),e.P&&(i.F=new u.default(i.S,"asset"));var n=i.W.init().then(function(){return i.W.exec("get_chain_id",[]).then(function(n){return i.T=n,c.default.M(n)})});i.S.A=function(){i.S&&i.S.I("","").then(function(){i.W.init().then(function(){i.l&&i.l("reconnect")}),i.q.init(),i.H.init(),e.g&&i.U.init(),e.k&&i.j.init(),e.P&&i.F.init()})},i.S.O=function(){i.close().then(function(){i.m&&i.m()})};var t=[n,i.q.init(),i.H.init()];return e.g&&t.push(i.U.init()),e.k&&t.push(i.j.init()),e.P&&t.push(i.F.init()),Promise.all(t)}).catch(function(t){return console.error(n,"Failed to initialize with error",t&&t.message),i.close().then(function(){throw t})})},n.prototype.close=function(){var n=this;return this.S&&1===this.S.N.readyState?this.S.close().then(function(){n.S=null}):(this.S=null,Promise.resolve())},n.prototype.B=function(){return this.W},n.prototype.D=function(){return this.q},n.prototype.J=function(){return this.H},n.prototype.R=function(){return this.j},n.prototype.L=function(){return this.U},n.prototype.V=function(){return this.F},n.prototype.h=function(n){this.l=n},n}();a.db=new Proxy(a,{get:function(n,t){return function(){return n.p().B().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),a.K=new Proxy(a,{get:function(n,t){return function(){return n.p().D().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),a.history=new Proxy(a,{get:function(n,t){return function(){return n.p().J().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),a.crypto=new Proxy(a,{get:function(n,t){return function(){return n.p().R().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),a.X=new Proxy(a,{get:function(n,t){return function(){return n.p().L().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),a.Y=new Proxy(a,{get:function(n,t){return function(){return n.p().V().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.default=a,t.t=e.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{Z:2,$:3,nn:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var i=void 0,r={tn:n.in.en||"GPH"};i={rn:"CORE",tn:"GPH",on:15,sn:86400,un:86400,cn:{fn:{rn:"BTS",tn:"BTS",T:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},an:{rn:"MUSE",tn:"MUSE",T:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},hn:{rn:"TEST",tn:"TEST",T:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},ln:{rn:"GOV",tn:"FEW",T:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},M:function(n){var t=void 0,e=void 0,o=void 0,s=void 0,u=void 0;for(t=0,e=(u=Object.keys(i.cn)).length;t<e;t++)if(s=u[t],(o=i.cn[s]).T===n)return i.dn=s,o.tn&&(i.tn=o.tn,r.tn=o.tn),{dn:s,K:o};i.dn||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){i.rn="CORE",i.tn="GPH",r.tn="GPH",i.on=15,i.sn=86400,console.log("Chain config reset")},wn:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GPH";i.tn=n,r.tn=n}},e.default=i,t.t=e.default}).call(this,n("_process"))},{vn:6}],3:[function(n,t,e){(function(i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(n){return n||"undefined"==typeof WebSocket||"undefined"==typeof document?s:WebSocket}e.s=!0;var s=void 0;s="undefined"!=typeof WebSocket||i.in.bn?WebSocket:n("ws");var u=5,c=2*u,f=function(){function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s=this,f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;r(this,n),this.url=t,this.l=e,this.pn=setTimeout(function(){if(s.mn){var n=s.mn;s.mn=null,s.close(),n(new Error("Connection attempt timed out after "+i/1e3+"s"))}},i),this.mn=null,this.A=null,this.closed=!1,this._n=u,this.yn=c,this.C=a,this.Tn=new Promise(function(n,e){s.mn=e;var i=o(f);try{s.N=new i(t)}catch(n){s.N={readyState:3,close:function(){}},e(new Error("Invalid url",t," closed"))}s.N.onopen=function(){clearTimeout(s.pn),s.l&&s.l("open"),s.A&&s.A(),s.kn=setInterval(function(){if(s.yn--,0==s.yn)return console.error(s.url+" connection is dead, terminating ws"),void s.close();s._n--,0==s._n&&(s.C&&s.C(s.closed),s._n=u)},5e3),s.mn=null,n()},s.N.onerror=function(n){s.kn&&(clearInterval(s.kn),s.kn=void 0),clearTimeout(s.pn),s.l&&s.l("error"),s.mn&&s.mn(n)},s.N.onmessage=function(n){s.yn=c,s.listener(JSON.parse(n.data))},s.N.onclose=function(){s.closed=!0,s.kn&&(clearInterval(s.kn),s.kn=void 0);for(var n=new Error("connection closed"),t=s.En+1;t<=s.gn;t+=1)s.Pn[t].reject(n);s.l&&s.l("closed"),s.xn&&s.xn(),s.O&&s.O()}}),this.gn=0,this.En=0,this.Pn={},this.Sn={},this.Cn={}}return n.prototype.call=function(n){var t=this;if(1!==this.N.readyState)return Promise.reject(new Error("websocket state error:"+this.N.readyState));var e=n[1];if(this.gn+=1,"set_subscribe_callback"!==e&&"subscribe_to_market"!==e&&"broadcast_transaction_with_callback"!==e&&"set_pending_transaction_callback"!==e||(this.Sn[this.gn]={On:n[2][0]},n[2][0]=this.gn),"unsubscribe_from_market"===e||"unsubscribe_from_accounts"===e){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var r in this.Sn)if(this.Sn[r].On===i){this.Cn[this.gn]=r;break}}var o={method:"call",An:n};return o.id=this.gn,this._n=u,new Promise(function(n,e){t.Pn[t.gn]={time:new Date,resolve:n,reject:e},t.N.send(JSON.stringify(o))})},n.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.An[0]),t?e=this.Sn[n.id].On:(e=this.Pn[n.id],this.En=n.id),e&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.Pn[n.id],this.Cn[n.id]&&(delete this.Sn[this.Cn[n.id]],delete this.Cn[n.id])):e&&t?e(n.An[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype.I=function(n,t){var e=this;return this.Tn.then(function(){return e.call([1,"login",[n,t]])})},n.prototype.close=function(){var n=this;return new Promise(function(t){if(clearInterval(n.kn),n.kn=void 0,n.xn=function(){t(),n.xn=null},!n.N)return console.log("Websocket already cleared",n),t();n.N.terminate?n.N.terminate():n.N.close(),3===n.N.readyState&&t()})},n}();e.default=f,t.t=e.default}).call(this,n("_process"))},{vn:6,N:5}],4:[function(n,t,e){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.s=!0;var r=function(){function n(t,e){i(this,n),this.S=t,this.Wn=e}return n.prototype.init=function(){var n=this;return this.S.call([1,this.Wn,[]]).then(function(t){return n.Gn=t,n})},n.prototype.exec=function(n,t){return this.S.call([this.Gn,n,t]).catch(function(n){throw n})},n}();e.default=r,t.t=e.default},{}],5:[function(n,t,e){},{}],6:[function(n,t,e){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(n){if(h===setTimeout)return setTimeout(n,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(n,0);try{return h(n,0)}catch(t){try{return h.call(null,n,0)}catch(t){return h.call(this,n,0)}}}function s(n){if(l===clearTimeout)return clearTimeout(n);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(n);try{return l(n)}catch(t){try{return l.call(null,n)}catch(t){return l.call(this,n)}}}function u(){b&&w&&(b=!1,w.length?v=w.concat(v):p=-1,v.length&&c())}function c(){if(!b){var n=o(u);b=!0;for(var t=v.length;t;){for(w=v,v=[];++p<t;)w&&w[p].In();p=-1,t=v.length}w=null,b=!1,s(n)}}function f(n,t){this.qn=n,this.Hn=t}function a(){}var h,l,d=t.t={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(n){h=i}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(n){l=r}}();var w,v=[],b=!1,p=-1;d.Un=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];v.push(new f(n,t)),1!==v.length||b||o(c)},f.prototype.In=function(){this.qn.apply(null,this.Hn)},d.title="browser",d.bn=!0,d.in={},d.jn=[],d.version="",d.Fn={},d.Mn=a,d.addListener=a,d.Nn=a,d.Bn=a,d.removeListener=a,d.Dn=a,d.Jn=a,d.Rn=a,d.zn=a,d.Ln=function(n){return[]},d.Vn=function(n){throw new Error("process.binding is not supported")},d.Kn=function(){return"/"},d.Qn=function(n){throw new Error("process.chdir is not supported")},d.Xn=function(){return 0}},{}]},{},[1])(1)});